<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Buy Cake</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.20.6/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lora:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  </head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    // Componente de Carrossel
    function Carousel() {
      const slides = [
        { image: 'assets/ifood.webp', caption: 'Patrocinador Oficial.' },
        { image: 'assets/predilecta.webp', caption: 'Patrocinador Oficial.' },
        { image: 'assets/bauducco.webp', caption: 'Patrocinador Oficial' },
      ];
      const [currentSlide, setCurrentSlide] = useState(0);

      useEffect(() => {
        const interval = setInterval(() => {
          setCurrentSlide((prev) => (prev + 1) % slides.length);
        }, 5000);
        return () => clearInterval(interval);
      }, []);

      return (
        <div className="carousel">
          {slides.map((slide, index) => (
            <div key={index} className={`slide ${index === currentSlide ? 'active' : ''}`}>
              <img src={slide.image} alt={`Slide ${index + 1}`} />
              <div className="caption">{slide.caption}</div>
            </div>
          ))}
        </div>
      );
    }

    // Componente Principal
    function App() {
      const [user, setUser] = useState(null);
      const [cart, setCart] = useState([]);
      const [showLogin, setShowLogin] = useState(false);
      const [currentSection, setCurrentSection] = useState('home');
      const [products] = useState([
        { id: 1, name: 'Bolo de Morango', price: 65.00, image: 'assets/bolo-morango.webp', description: 'Bolo de massa branca com recheio de morango e nata. Peso: 1kg' },
        { id: 2, name: 'Bolo de Brigadeiro', price: 55.00, image: 'assets/bolo-brigadeiro.webp', description: 'Bolo de massa de chocolate com recheio de brigadeiro. Peso: 1,5kg' },
        { id: 3, name: 'Bolo de Pessego', price: 70.00, image: 'assets/bolo-pessego.webp', description: 'Bolo de massa branca com recheio de geleia de p√™ssego e chantilly. Peso: 2kg' },
      ]);
      const [newCollection] = useState([
        { id: 4, name: 'Bolo de Pistache com Brigadeiro', price: 240.00, image: 'assets/bolo-pistache.webp', description: 'Bolo de massa de chocolate com recheio de brigadeiro de pisctache e brigadeiro de cacau. Peso: 1,3kg' },
        { id: 5, name: 'Bolo Red Velvet', price: 99.90, image: 'assets/redvelvet.webp', description: 'Bolo de massa vermelha com recheio de cream chease e frutas vermelhas. Peso: 1,5kg' },
      ]);

      useEffect(() => {
        const savedUser = localStorage.getItem('user');
        const savedCart = localStorage.getItem('cart');
        if (savedUser) setUser(JSON.parse(savedUser));
        if (savedCart) setCart(JSON.parse(savedCart));
      }, []);

      useEffect(() => {
        if (user) localStorage.setItem('user', JSON.stringify(user));
        localStorage.setItem('cart', JSON.stringify(cart));
      }, [user, cart]);

      return (
        <div>
          <div className={showLogin ? 'auth-overlay' : 'auth-overlay hidden'}></div>
          <Header user={user} setUser={setUser} cart={cart} setShowLogin={setShowLogin} setCurrentSection={setCurrentSection} />
          <main>
            <div className={currentSection === 'home' ? '' : 'section hidden'}>
              <div className="video-section">
                <video autoPlay loop muted playsInline>
                  <source src="assets/morangoamor.mp4" type="video/mp4"/>
                  Seu navegador n√£o suporta o elemento de v√≠deo.
                </video>
                <div className="video-caption">Lan√ßamento Exclusivo</div>
              </div>
              <Carousel />
              <Products products={products} cart={cart} setCart={setCart} />
            </div>
            <div className={currentSection === 'colecoes' ? 'new-collection' : 'new-collection section hidden'}>
              <h2>Bolos Premium</h2>
              <Products products={newCollection} cart={cart} setCart={setCart} />
            </div>
            {showLogin && !user && <Auth setUser={setUser} setShowLogin={setShowLogin} />}
            {user && <Checkout cart={cart} setCart={setCart} user={user} />}
          </main>
          <footer>
            <p>
              <a href="https://www.instagram.com/bwjoaillerie?igsh=MWduMHgxaGNjeXI2aQ==" target="_blank">Siga-nos no Instagram</a>
            </p>
            <p>Endere√ßo: Jardins, 1234, S√£o Paulo - SP, CEP 01400-000</p>
            <p>2025¬© BuyCake‚Ñ¢. Todos os direitos reservados.</p>
          </footer>
        </div>
      );
    }

    // Componente de Cabe√ßalho
    function Header({ user, setUser, cart, setShowLogin, setCurrentSection }) {
      return (
        <header>
          <img src="assets/logo.webp" alt="Blair Waldorf Logo" className="logo" />
          <nav>
            <a href="#home" onClick={() => setCurrentSection('home')}>Home</a>
            <a href="#colecoes" onClick={() => setCurrentSection('colecoes')}>Bolos Virais</a>
            {user ? (
              <>
                <span>Ol√°, {user.name}</span>
                <button onClick={() => setUser(null)}>Sair</button>
              </>
            ) : (
              <button onClick={() => setShowLogin(true)}>Fazer Login</button>
            )}
            <div className="cart">
              <span className="count">{cart.length}</span>
              <span className="icon">üõí</span>
            </div>
          </nav>
        </header>
      );
    }

    // Componente de Produtos
    function Products({ products, cart, setCart }) {
      const addToCart = (product) => {
        setCart([...cart, product]);
      };

      return (
        <div className="products">
          {products.map((product) => (
            <div key={product.id} className="product-card">
              <img src={product.image} alt={product.name} />
              <div className="info">
                <h3>{product.name}</h3>
                <p className="price">R$ {product.price.toFixed(2)}</p>
                <p className="description">{product.description}</p>
                <button onClick={() => addToCart(product)}>Adicionar ao Carrinho</button>
              </div>
            </div>
          ))}
        </div>
      );
    }

    // Componente de Autentica√ß√£o (Cadastro/Login)
    function Auth({ setUser, setShowLogin }) {
      const [isLogin, setIsLogin] = useState(true);
      const [form, setForm] = useState({ name: '', email: '', password: '' });

      const handleSubmit = (e) => {
        e.preventDefault();
        if (isLogin) {
          // Simula login
          setUser({ name: form.name, email: form.email });
        } else {
          // Simula cadastro
          setUser({ name: form.name, email: form.email });
        }
        setShowLogin(false);
      };

      return (
        <div className="auth">
          <h2>{isLogin ? 'Login' : 'Cadastro'}</h2>
          <div>
            <label>Nome</label>
            <input
              type="text"
              value={form.name}
              onChange={(e) => setForm({ ...form, name: e.target.value })}
              required
            />
          </div>
          <div>
            <label>Email</label>
            <input
              type="email"
              value={form.email}
              onChange={(e) => setForm({ ...form, email: e.target.value })}
              required
            />
          </div>
          <div>
            <label>Senha</label>
            <input
              type="password"
              value={form.password}
              onChange={(e) => setForm({ ...form, password: e.target.value })}
              required
            />
          </div>
          <button onClick={handleSubmit}>{isLogin ? 'Entrar' : 'Cadastrar'}</button>
          <button className="toggle" onClick={() => setIsLogin(!isLogin)}>
            {isLogin ? 'Criar conta' : 'J√° tenho conta'}
          </button>
        </div>
      );
    }

    // Componente de Finaliza√ß√£o de Compra
    function Checkout({ cart, setCart, user }) {
      const [address, setAddress] = useState({
        street: '',
        city: '',
        state: '',
        zip: '',
      });
      const [paymentMethod] = useState('Pix');
      const total = cart.reduce((sum, item) => sum + item.price, 0);

      const handleAddressChange = (e) => {
        setAddress({ ...address, [e.target.name]: e.target.value });
      };

      const handleCheckout = () => {
        if (!address.street || !address.city || !address.state || !address.zip) {
          alert('Por favor, preencha todos os campos do endere√ßo.');
          return;
        }
        // Simula finaliza√ß√£o de compra
        alert(`Compra finalizada com sucesso! Total: R$ ${total.toFixed(2)}\nChave Pix: pixbuycake@gmail.com.br`);
        setCart([]);
        setAddress({ street: '', city: '', state: '', zip: '' });
      };

      return (
        <div className="checkout">
          <h2>Finalizar Compra</h2>
          <div>
            <h3>Itens no Carrinho</h3>
            {cart.length === 0 ? (
              <p>Carrinho vazio</p>
            ) : (
              <ul>
                {cart.map((item, index) => (
                  <li key={index}>
                    {item.name} - R$ {item.price.toFixed(2)}
                  </li>
                ))}
              </ul>
            )}
            <p><strong>Total: R$ ${total.toFixed(2)}</strong></p>
          </div>
          <div>
            <h3>Endere√ßo de Entrega</h3>
            <input
              type="text"
              name="street"
              placeholder="Rua"
              value={address.street}
              onChange={handleAddressChange}
            />
            <input
              type="text"
              name="city"
              placeholder="Cidade"
              value={address.city}
              onChange={handleAddressChange}
            />
            <input
              type="text"
              name="state"
              placeholder="Estado"
              value={address.state}
              onChange={handleAddressChange}
            />
            <input
              type="text"
              name="zip"
              placeholder="CEP"
              value={address.zip}
              onChange={handleAddressChange}
            />
          </div>
          <div>
            <h3>M√©todo de Pagamento</h3>
            <p>{paymentMethod}</p>
          </div>
          <button onClick={handleCheckout}>Finalizar Compra</button>
        </div>
      );
    }

    // Renderizar o App
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>